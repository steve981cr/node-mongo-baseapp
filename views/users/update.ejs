<% include ../layouts/header %>

<div class="row mt-4">
  <div class="col-md-10 offset-md-1">
    <div class="card">
      <h2 class="card-header bg-dark text-white text-center">
        Account Settings
      </h2>
      <!-- <form method="POST" action="/users/<%= user.id %>/update" enctype="multipart/form-data"> -->
      <form method="POST" action="/users/<%= user.id %>/update">
        <div class='card-body'>
          <% include ../layouts/form-errors %>
          <div class='form-group'>
            <label for="username">Userame</label>
            <input type="text" name="username" value="<%= typeof user === 'undefined' ? '' : user.username %>" class='form-control' maxlength="50" required>
          </div>

          <div class='form-group'>
            <label for="email">Email</label>
            <input type="email" name="email" value="<%= typeof user === 'undefined' ? '' : user.email %>" class='form-control' required>
          </div>

          <fieldset class='card bg-light p-3'>
            <label for="password">Change Password (must be at least 6 characters)</label>
            <input type="password" name="password" class='form-control' minlength="6" maxlength="32">

            <label for="passwordConfirmation">Confirm Password</label>
            <input type="password" name="passwordConfirmation" class='form-control'>
          </fieldset>

          <div class="mt-3">Add or Change Profile Picture</div>
          <!-- <%# if @user.image.attached? %>
            <%#= image_tag @user.image.variant(resize: "100x100"), class: 'img-thumbnail my-2'%>
          <%# end %> -->
          <div class='custom-file'>
            <label for='image' class='custom-file-label'>Select from File</label>
            <input id="file" type="file" name="image" class='custom-file-input' accept="image/*">
          </div>
        </div>
        <div class="card-footer">
          <div class='form-group'>
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="/users/<%= user.id %>" class='btn btn-sm btn-secondary float-right'>Cancel</a>
          </div>
        </div>
      </form>
    </div>

    <hr>
    <h3>Delete Account</h3>
    <p><a href="/users/<%= user.id %>/delete" class="btn btn-danger btn-sm">Delete</a></p>
    <!-- <p>Unhappy? <%#= button_to "Cancel my account", user_path(@user), data: { confirm: "Are you sure?" }, class: "btn btn-danger btn-sm", method: :delete %></p> -->
  </div>
</div>

<% include ../layouts/footer %>